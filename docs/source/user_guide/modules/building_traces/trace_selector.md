# trace_selector

The objective of this script is to attribute labels (e.g. gene expression, morphological, etc) to single traces. 

**Invoke**

To run this function, run ```trace_selector.py``` at the command line. This function will find and process all the `Trace` files within the `buildsPWDmatrix` folder with the name starting with `Trace_`. To provide a specific list of `Trace` files, please see section below (Piping file lists using the `--pipe`  option). Each trace file will be edited so that the `labels` colums now contains a comma-separated list of the labels where it was found. It will then search and find the numpy (NPY) files within `segmentedObjects` with the keyword `SNDmask` in the filename. These files can be generated by running `processSNDchannel.py`.


**Relevant options**

```
usage: trace_selector.py [-h] [-F ROOTFOLDER] [--pixel_size PIXEL_SIZE] [--pipe]

optional arguments:
  -h, --help            show this help message and exit
  -F ROOTFOLDER, --rootFolder ROOTFOLDER
                        Folder with images
  --pixel_size PIXEL_SIZE
                        Lateral pixel size un microns. Default = 0.1
  --pipe                inputs Trace file list from stdin (pipe)
```

As coordinates in the `Trace` file are in micrometers, `trace_selector.py` needs to know how to convert them to pixel units to match `SNDchannel` masks.

**Piping file lists using the `--pipe`  option** 

When this argument is not invoked, `trace_selector` will read all `Trace_` files within `BuildsPWDmatrix`.

If this argument is provided, you can send a file list of `Trace_` files to process using piping. For instance:

```sh
ls buildsPWDmatrix/Trace_*3D*2.ecsv | trace_selector.py --pipe
```

will list a selection of Trace files and send it to `trace_selector` to process.
